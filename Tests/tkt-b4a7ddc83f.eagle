###############################################################################
#
# tkt-b4a7ddc83f.eagle --
#
# Written by Joe Mistachkin.
# Released to the public domain, use at your own risk!
#
###############################################################################

package require Eagle
package require EagleLibrary
package require EagleTest

runTestPrologue

###############################################################################

# set ::test_configuration Debug

source [file join $path common.eagle]
runSQLiteTestPrologue

###############################################################################

runTest {test tkt-b4a7ddc83f-1.1 {initialization/shutdown} -setup [subst {
  set fileName tkt-b4a7ddc83f-1.1.db
  set ::path {$::path}
  set ::test_configuration {$::test_configuration}
  source [file join $::path common.eagle]
}] -body {
  package require EagleTest
  tryLoadAssembly System.Data.SQLite.dll
  object invoke System.Data.SQLite.SQLiteLog Initialize
  setupDb $fileName
} -cleanup {
  cleanupDb $fileName
} -constraints {eagle monoBug28 command.sql compile.DATA\
compile.ISOLATED_INTERPRETERS System.Data.SQLite} -isolationLevel AppDomain \
-result {}}

###############################################################################

runTest {test tkt-b4a7ddc83f-1.2 {initialization/shutdown} -setup [subst {
  set fileName tkt-b4a7ddc83f-1.2.db
  set ::path {$::path}
  set ::test_configuration {$::test_configuration}
  source [file join $path common.eagle]
}] -body {
  package require EagleTest
  tryLoadAssembly System.Data.SQLite.dll

  object invoke Interpreter.GetActive Interactive True
  debug break

  object invoke System.Data.SQLite.SQLiteLog Initialize
  setupDb $fileName
} -cleanup {
  cleanupDb $fileName
} -constraints {eagle monoBug28 command.sql compile.DATA\
compile.ISOLATED_INTERPRETERS System.Data.SQLite} -isolationLevel AppDomain \
-result {}}

###############################################################################

runSQLiteTestEpilogue
runTestEpilogue
